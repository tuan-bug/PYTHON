{% extends 'app/base.html' %}
{% load static %}
{% load custom_filters %}
{% block main-content %}
    {% include 'app/layout/message.html' %}

    <section class="categories mt-5">
        <div class="container">
            <div class="row featured__filter justify-content-center">
                {% for category in categories %}
                    <a href="{% url 'category' %}?category={{ category.slug }}">
                        <div class="col-lg-2 col-md-4 col-sm-6 mix oranges fresh-meat">
                            <div class="featured__item">
                                <div class="featured__item__pic_category set-bg" data-setbg="{{category.ImageURL}}">
                                </div>
                                <div class="featured__item__text">
                                    <h6><a href="{% url 'category' %}?category={{ category.slug }}">{{category.name}}</a></h6>

                                </div>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            </div>
        </div>
    </section>

    <section class="">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-title">
                        <h2>Sản Phẩm</h2>
                    </div>
                </div>
            </div>
            <div class="row featured__filter">

                {% for product in products %}
                    {% if product and product.count > 0  %}
                        <div class="col-lg-3 col-md-4 col-sm-6 mix oranges fresh-meat">
                            <div class="featured__item">
                                <div class="featured__item__pic set-bg" data-setbg="{{product.ImageURL}}">
                                    <ul class="featured__item__pic__hover">

                                        <li><a href="#"><i class="fa fa-heart"></i></a></li>
                                        <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                                        <li><a href="#" data-product={{product.id}} data-action="add"  class="add-btn update-btn"><i class="fa fa-shopping-cart"></i></a></li>
                                    </ul>
                                </div>
                                <div class="featured__item__text">
                                    <h6><a href="{% url 'detail' %}?id={{ product.id }}">{{product.name}}</a></h6>
                                    <h5>{{product_price | get_item:product.id}} <sup>đ</sup></h5>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
            <nav aria-label="Page navigation ">
                <ul class="pagination justify-content-center mb-3">
                    {% if products.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page=1">&laquo; Đầu</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="?page={{ products.previous_page_number }}">Trước</a>
                        </li>
                    {% endif %}

                    <li class="page-item disabled">
                        <span class="page-link">
                            Trang {{ products.number }}
                        </span>
                    </li>

                    {% if products.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ products.next_page_number }}">Tiếp</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="?page={{ products.paginator.num_pages }}">Cuối &raquo;</a>
                        </li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    </section>
    
{% endblock main-content %}